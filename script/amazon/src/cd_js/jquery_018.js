!function(n){function e(){var e=window.bowser._detect("undefined"!=typeof navigator?navigator.userAgent:"");if(e.msie){var o=n(document).height(),t=n(window).height();return[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,20>o-t?t:o]}return[n(document).width(),n(document).height()]}function o(e){return e?e.call(n.mask):void 0}n.tools=n.tools||{version:"1.2.5"};var t;t=n.tools.expose={conf:{maskId:"exposeMask",loadSpeed:"fast",closeSpeed:"fast",closeOnClick:!0,closeOnEsc:!0,zIndex:9998,opacity:.6,startOpacity:0,color:"#fff",onLoad:null,onClose:null}};var i,s,c,d,a;n.mask={load:function(r,u){if(c)return this;"string"==typeof r&&(r={color:r}),r=r||d,d=r=n.extend(n.extend({},t.conf),r),i=n("#"+r.maskId),i.length||(i=n("<div/>").attr("id",r.maskId),n("body").append(i));var l=e();return i.css({position:"absolute",top:0,left:0,width:l[0],height:l[1],display:"none",opacity:r.startOpacity,zIndex:r.zIndex}),r.color&&i.css("backgroundColor",r.color),o(r.onBeforeLoad)===!1?this:(r.closeOnEsc&&n(document).bind("keydown.mask",function(e){27==e.keyCode&&n.mask.close(e)}),r.closeOnClick&&i.bind("click.mask",function(e){n.mask.close(e)}),n(window).bind("resize.mask",function(){n.mask.fit()}),u&&u.length&&(a=u.eq(0).css("zIndex"),n.each(u,function(){var e=n(this);/relative|absolute|fixed/i.test(e.css("position"))||e.css("position","relative")}),s=u.css({zIndex:Math.max(r.zIndex+1,"auto"==a?0:a)})),i.css({display:"block"}).fadeTo(r.loadSpeed,r.opacity,function(){i.css("opacity",r.opacity),n.mask.fit(),o(r.onLoad),c="full"}),c=!0,this)},close:function(){if(c){if(o(d.onBeforeClose)===!1)return this;i.fadeOut(d.closeSpeed,function(){o(d.onClose),s&&s.css({zIndex:a}),c=!1}),n(document).unbind("keydown.mask"),i.unbind("click.mask"),n(window).unbind("resize.mask")}return this},fit:function(){if(c){var n=e();i.css({width:n[0],height:n[1]})}},getMask:function(){return i},isLoaded:function(n){return n?"full"==c:c},getConf:function(){return d},getExposed:function(){return s}},n.fn.mask=function(e){return n.mask.load(e),this},n.fn.expose=function(e){return n.mask.load(e,this),this}}(jQuery),$.ccfregistry.pluginReady("expose");