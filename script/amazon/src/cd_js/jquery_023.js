!function(t){var e,o=!0,a=[],n=-1;jQuery.fn.ajaxbackbuttonhistory=function(r){var i={event:"ajaxhistoryevent",urlHeader:"X-Requested-Url",iframeUrl:"/ccf2/html/historyIFrame.html",historyToken:"history:"};e=t.extend(i,r);var h=location.hash;setInterval(function(){if(location.hash!=h&&""!=location.hash&&"#"!=location.hash){for(var t=!1,r=0;r<a.length;r++)a[r]==location.hash&&(t=!0,n=r);if(t||(a.length=n+1,a.push(location.hash),n++),!o){var i=location.hash;i&&i.indexOf(e.historyToken)>0&&(jQuery(document).ajaxcall({event:e.event,complete:jQuery.fn.ajaxbackbuttonhistory.replaceHash,url:i.substring(i.lastIndexOf(e.historyToken)+e.historyToken.length)}),jQuery(document).trigger(e.event),jQuery(document).unbind(e.event))}}h=location.hash,o=!1},100)},jQuery.fn.ajaxbackbuttonhistory.replaceHash=function(t,e){jQuery.fn.ajaxbackbuttonhistory.writeHash(t,e,!0)},jQuery.fn.ajaxbackbuttonhistory.writeHash=function(r,i,h){var s=r.getResponseHeader(e.urlHeader),c=window.bowser._detect("undefined"!=typeof navigator?navigator.userAgent:"");c&&c.msie?0==t("#historyframe").size()?t("body").append('<iframe width="1" height="1" class="displayHidden" id="historyframe" src="'+e.iframeUrl+"?href="+e.historyToken+s+'"/>'):h?(location.hash!="#"+e.historyToken+s&&(a[n]="#"+e.historyToken+s,n--),location.replace(location.pathname+location.search+"#"+e.historyToken+s)):t("#historyframe").attr("src",e.iframeUrl+"?href="+e.historyToken+s):-1==location.hash.indexOf(e.historyToken)||h?(location.replace(location.pathname+location.search+"#"+e.historyToken+s),a[n]="#"+e.historyToken+s):location.hash="#"+e.historyToken+s,o=!0},jQuery.fn.ajaxbackbuttonhistory.discardHistory=function(){history.go(-1*n)}}(jQuery),$(document).ready(function(){jQuery.fn.ajaxbackbuttonhistory()}),$.ccfregistry.pluginReady("ajaxbackbuttonhistory");