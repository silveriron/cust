!function(e){jQuery.fn.blocks=function(t){function n(e){var t="true"===e.contentEditable;if(window.getSelection){if(t){e.focus();var n=window.getSelection().getRangeAt(0),r=n.cloneRange();return r.selectNodeContents(e),r.setEnd(n.endContainer,n.endOffset),r.toString().length}return e.selectionStart}if(document.selection){if(e.focus(),t){var n=document.selection.createRange(),r=document.body.createTextRange();return r.moveToElementText(e),r.setEndPoint("EndToEnd",n),r.text.length}var a=0,n=e.createTextRange(),r=document.selection.createRange().duplicate(),o=r.getBookmark();for(n.moveToBookmark(o);0!==range.moveStart("character",-1);)a++;return a}return 0}function r(e,t){if(null!=e)if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.move("character",t),n.select()}else e.selectionStart?(e.focus(),e.setSelectionRange(t,t)):e.focus()}var a=e.extend({event:"input",block:4,addStr:" "},t),o=this,i=window.bowser._detect("undefined"!=typeof navigator?navigator.userAgent:"");return!i.ios&&(i.mobile||i.tablet)||!(i.safari&&parseFloat(i.version)>=parseFloat(6))&&i.safari||e(this).bind(a.event,function(){var t=e(o).val();if(t.length>0){var i=new RegExp(".{"+a.block+"}","g"),c=n(e(o)[0]),l=c===t.length;t=t.replace(/\s/gi,""),t=t.replace(i,function(e){return e+a.addStr}),e(o).val(t.trim());var s=n(e(o)[0]);if(!l&&s>c){var d=c>1&&t.indexOf(a.addStr,c-1)===c-1?-1:0;r(e(o)[0],c+d)}}}),e(this)}}(jQuery),$.ccfregistry.pluginReady("blocks");