!function(){jQuery.fn.gsaSearchField=function(t){var e={suggestURL:"/suche/gsap?a=suggest",searchPageURL:"/suche/#/?start=0&q=",searchButtonSelector:"#searchbutton",paramsSelectors:[]};jQuery.extend(e,t),"string"==typeof e.paramsSelectors&&(e.paramsSelectors=e.paramsSelectors.split(","));var s=this,a=this;this.is("input")||(a=this.find("input")),a.autocomplete(e.suggestURL,{minChars:3,selectFirst:!1,resultsClass:"ac_results gsaAutocompleteResults",loadingClass:"ac_results gsaAutocompleteLoading",parse:function(t){for(var e=JSON.parse(t),s=[],a=0;a<e.length;a++)s[s.length]={data:e[a],value:e[a],result:e[a]};return s},formatItem:function(t){return t}});var r=function(){var t=e.searchPageURL+encodeURIComponent(s.val());return e.paramsSelectors&&e.paramsSelectors.length&&$.each(e.paramsSelectors,function(e,s){var a=$(s);t+="&"+a.attr("name")+"="+encodeURIComponent(a.val())}),t},n=$(this).closest("form");n.submit(function(){return window.location.assign(r()),!1}),this.focus(function(){}),this.blur(function(){}),this.keyup(function(t){"13"==t.keyCode&&(this.blur(),n.submit())});var o=$(e.searchButtonSelector);this.on("change result",function(){var t=r();o.attr("href",t),n.attr("action",t)}).change(),o.click(function(t){t.preventDefault(),n.submit()})}}(jQuery),$.ccfregistry.pluginReady("gsaSearchField");